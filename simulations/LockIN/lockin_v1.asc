Version 4
SHEET 1 1764 680
WIRE -1216 -896 -1216 -912
WIRE -624 -880 -624 -896
WIRE -416 -816 -448 -816
WIRE -320 -800 -352 -800
WIRE -80 -800 -320 -800
WIRE -1216 -784 -1216 -816
WIRE -976 -784 -1216 -784
WIRE -912 -784 -976 -784
WIRE -816 -784 -912 -784
WIRE -704 -784 -752 -784
WIRE -624 -784 -624 -800
WIRE -624 -784 -704 -784
WIRE -416 -784 -624 -784
WIRE -320 -784 -320 -800
WIRE -1216 -768 -1216 -784
WIRE -624 -768 -624 -784
WIRE -912 -752 -912 -784
WIRE -1584 -736 -1680 -736
WIRE -1392 -736 -1504 -736
WIRE -1264 -736 -1312 -736
WIRE -448 -688 -448 -816
WIRE -320 -688 -320 -704
WIRE -320 -688 -448 -688
WIRE -1680 -672 -1680 -736
WIRE -624 -672 -624 -688
WIRE -320 -672 -320 -688
WIRE -1216 -656 -1216 -704
WIRE -912 -640 -912 -672
WIRE -320 -560 -320 -592
WIRE -912 -544 -912 -560
WIRE -320 -464 -320 -480
WIRE -2304 -352 -2304 -384
WIRE -2192 -352 -2192 -384
WIRE -2304 -256 -2304 -272
WIRE -2192 -256 -2192 -272
WIRE 1536 -80 1392 -80
WIRE 1024 -64 896 -64
WIRE 432 -16 400 -16
WIRE -80 0 -80 -800
WIRE 16 0 16 -16
WIRE 16 0 -80 0
WIRE 64 0 16 0
WIRE 1392 16 1392 -80
WIRE 1440 16 1392 16
WIRE 416 32 400 32
WIRE 896 32 896 -64
WIRE 928 32 896 32
WIRE 1536 32 1536 -80
WIRE 1536 32 1504 32
WIRE 1648 32 1536 32
WIRE 1712 32 1648 32
WIRE 1024 48 1024 -64
WIRE 1024 48 992 48
WIRE 1056 48 1056 -96
WIRE 1056 48 1024 48
WIRE 1088 48 1056 48
WIRE 1200 48 1168 48
WIRE 1248 48 1200 48
WIRE 1376 48 1328 48
WIRE 1440 48 1376 48
WIRE 64 64 -16 64
WIRE 416 64 416 32
WIRE 416 64 400 64
WIRE 464 64 416 64
WIRE 544 64 464 64
WIRE 672 64 624 64
WIRE 736 64 672 64
WIRE 928 64 816 64
WIRE 1200 80 1200 48
WIRE 1376 80 1376 48
WIRE 512 96 400 96
WIRE 672 96 672 64
WIRE 512 112 512 96
WIRE -16 128 -16 64
WIRE -16 128 -64 128
WIRE 64 128 16 128
WIRE 432 128 400 128
WIRE 16 160 16 128
WIRE 432 160 400 160
WIRE 1200 160 1200 144
WIRE 1376 160 1376 144
WIRE 672 176 672 160
WIRE -16 192 -16 128
WIRE 64 192 -16 192
WIRE -336 320 -480 320
WIRE -64 320 -256 320
WIRE 64 320 -64 320
WIRE 576 336 576 320
WIRE 576 336 400 336
WIRE 624 336 576 336
WIRE 64 352 32 352
WIRE 32 384 32 352
WIRE 432 384 400 384
WIRE -480 400 -480 320
WIRE -480 496 -480 480
FLAG 432 160 RF
FLAG 432 128 RA
FLAG 16 -16 RA
FLAG 512 112 0
FLAG 32 384 0
FLAG -64 320 REFin
FLAG -2304 -256 0
FLAG -2192 -256 0
FLAG -2304 -384 VDD
FLAG -2192 -384 VSS
FLAG 432 -16 VDD
FLAG 432 384 VSS
FLAG -480 496 0
FLAG 624 336 status
FLAG 464 64 output
FLAG -384 -768 VSS
FLAG -384 -832 VDD
FLAG 576 240 VDD
FLAG -64 128 RF
FLAG 16 160 0
FLAG 960 80 VSS
FLAG 960 16 VDD
FLAG 1200 160 0
FLAG 1472 64 VSS
FLAG 1472 0 VDD
FLAG 1648 32 LPout
FLAG -1216 -912 VDD
FLAG -1216 -656 0
FLAG -704 -784 PDinput
FLAG -1680 -672 0
FLAG -976 -784 PDoutput
FLAG 1376 160 0
FLAG -624 -896 VDD
FLAG -624 -672 VSS
FLAG -912 -544 0
FLAG 672 176 0
FLAG 1056 -96 out1
FLAG -320 -464 0
SYMBOL AD630 192 144 R0
SYMATTR InstName U1
SYMBOL voltage -2304 -368 R0
WINDOW 3 -238 95 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value {SupplyVoltageP}
SYMATTR InstName V1
SYMBOL voltage -2192 -368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {SupplyVoltageN}
SYMBOL voltage -480 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-5 5 0 10n 10n {Ton} {Tpulse})
SYMBOL res -240 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 0.01
SYMBOL res -640 -784 R0
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL Opamps\\UniversalOpAmp1 -384 -800 R0
SYMATTR InstName U2
SYMBOL res -336 -800 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res -336 -688 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 560 224 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL Opamps\\UniversalOpAmp1 960 48 R0
SYMATTR InstName U3
SYMBOL cap 1184 80 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL Opamps\\UniversalOpAmp1 1472 32 R0
SYMATTR InstName U4
SYMBOL res 1184 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 220
SYMBOL Opamps\\LT1328PD -1232 -768 R0
SYMATTR InstName U5
SYMBOL current -1584 -736 R270
WINDOW 0 24 80 Left 2
WINDOW 3 -139 -244 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0 5u 0 10n 10n {Ton} {Tpulse})
SYMBOL res -1232 -912 R0
SYMATTR InstName R12
SYMATTR Value 1Meg
SYMBOL res -1296 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1
SYMBOL cap -752 -800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res 1344 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 220
SYMBOL cap 1360 80 R0
SYMATTR InstName C3
SYMATTR Value 10n
SYMBOL res -640 -896 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL bv -912 -656 R0
SYMATTR InstName B1
SYMATTR Value V=(white(1e8*time)*10)*1e-3
SYMBOL res -928 -768 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 640 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 832 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL cap 656 96 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL voltage -320 -576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value -3m
TEXT 56 456 Left 2 !.tran {Tsim}
TEXT -232 -16 Left 2 ;signal input
TEXT 56 504 Left 2 !* speeds up simulation\n* https://ez.analog.com/design-tools-and-calculators/f/q-a/90427/ad630-ltspice-simulation-problem/201057\n.options cshunt=1e-15
TEXT -2328 -464 Left 2 ;supply voltage
TEXT -2536 -536 Left 2 !.param SupplyVoltageP=5 \n.param SupplyVoltageN=-1*{SupplyVoltageP}
TEXT -304 256 Left 2 ;needs bipolar input signal
TEXT -1096 256 Left 2 !* derive parameter for stimulus / reference clock\n.param Tpulse = 1/{Fsystem}\n.param Ton = 0.5*{Tpulse}\n.param Tsim = 5*{Tpulse}
TEXT -48 -160 Left 2 ;important: signal at input bipolar
TEXT -888 -528 Left 2 ;additional noise ~5mV
TEXT -400 -416 Left 2 ;make signal symmetric\naround zero
TEXT -1096 56 Left 2 !.step dec param Fsystem 100 1Meg 3\n.meas AVG_vout1 AVG v(out1)\n.meas AVG_lpout AVG v(lpout)\n.meas AVG output AVG v(output)\n;.param Fsystem=10k
